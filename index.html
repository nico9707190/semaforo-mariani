<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gioco Semaforo</title>
    <link rel="stylesheet" href="static/css/index.css">     
</head>
<body>
    <script src="p5.min.js"></script>
    <script>
        let conta;
        let tempo = 0;
        let greenLight = false;
        let button;
        let reazione = 0;
        let clicked = false; 
        
        function setup(){
            createCanvas(1400,500)
        }

        function draw(){
            background(0,0,0)
            fill(255,0,0)
            circle(100,200,175)
            fill(255,0,0)
            circle(400,200,175)
            fill(255,0,0)
            circle(700,200,175)
            fill(255,0,0)
            circle(1000,200,175)
            fill(255,0,0)
            circle(1300,200,175)
            textSize(50);
            textAlign(CENTER, CENTER);
            text('TEST DEI RIFLESSI', width / 2, 50);

            if (greenLight && !button) {
                button = createButton('Clicca qui');
                button.position(width / 2 - 100, height / 2 + circleDiameter);
                button.size(200, 100);
                button.style('font-size', '24px');
                button.mousePressed(misura);
                tempo = millis(); 
            }

            if (clicked) {
                textSize(30);
                text('Tempo di reazione: ' + (reazione / 1000).toFixed(2) + ' secondi', width / 2, height / 2 + circleDiameter * 2);
            }
        }

        function misura() {
            reazione = millis() - tempo; 
            clicked = true;
            button.remove();
        }
        
        function contaUpdate() {
            if (conta > 0) {
            conta--;
            } else if (!greenLight) {
                greenLight = true; 
            }
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }

    </script>
</body>
</html>
